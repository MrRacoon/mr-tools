import { config } from 'mr-config';
import { requireRootPackage } from 'mr-scrape';
import { init, setRoot, update } from 'mr-state';
import { applyMiddleware, createStore } from 'redux';
import thunk from 'redux-thunk';

// tslint:disable-next-line
const log = (msg: any) => console.log(JSON.stringify(msg, null, 2));

const store = createStore(update, init, applyMiddleware(thunk));

const rootPackagePath = `${config.root}/package.json`;
store.dispatch(setRoot(rootPackagePath));

const rootPackageJson = requireRootPackage(rootPackagePath);
log(rootPackageJson);
