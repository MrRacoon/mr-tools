import glob from 'glob';
import { Path, RootPackageJson, SubPackageJson } from 'mr-types';
import _ from 'ramda';

export function requireRootPackage(path: Path): RootPackageJson {
  return require(path);
}

export function subPackagePaths(rootPackage: RootPackageJson) {
  return _.chain(glob.sync, _.propOr([], 'workspaces', rootPackage));
}

export function subPackageJsonPaths(rootPackage: RootPackageJson) {
  return _.map(
    (path) => `${path}/package.json`,
    subPackagePaths(rootPackage),
  );
}

export function requireSubPackage(path: Path): SubPackageJson {
  return require(path);
}
